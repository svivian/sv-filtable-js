(function(e){var l=["odd","even"],c=[],h={text:{selector:'input[type="text"]',event:"keyup"},select:{selector:"select",event:"change"},checkbox:{selector:'input[type="checkbox"]',event:"click"}},f={init:function(a){a=e.extend({controlPanel:null,handleSort:!0},a);var b=e(this);return this.each(function(){for(var d in h)e(h[d].selector,a.controlPanel).each(function(){$ctrl=e(this);c.push($ctrl);$ctrl.on(h[d].event,function(){f.createAndRunFilters(b)})})})},filter:function(a){a=e.extend({filters:[],
handleSort:!0},a);return this.each(function(){var b=e(this);b.trigger("beforetablefilter");if(a.handleSort)b.on("aftertablesort",function(){f.handleRowsThenStripe(b,function(a){return!a.hasClass("hidden")})});setTimeout(function(){f.handleRowsThenStripe(b,function(d){for(var b=0,e=a.filters.length;b<e;b++){for(var g=a.filters[b].columns,j=a.filters[b].value.toLowerCase(),f=!1,c=0,h=g.length;c<h;c++)0<=d.find("td").eq(g[c]).text().toLowerCase().indexOf(j)&&(f=!0);if(!f)return!1}return!0});b.trigger("aftertablefilter")},
10)})},handleRowsThenStripe:function(a,b){var d=0,c=a.find("> tbody");c.each(function(){var a=c.clone();a.find("> tr").each(function(){var a=e(this),c=b(a);a.removeClass(l.join(" "));c?(a.removeClass("hidden"),a.addClass(l[d]),d=1-d):a.addClass("hidden")});c.replaceWith(a)})},createAndRunFilters:function(a){for(var b=[],d=0,e=c.length;d<e;d++){var k=c[d],g=k.data("filter-col");if(!g)continue;var g=g.toString().split(","),j="";c[d].is(h.checkbox.selector)?c[d].is(":checked")&&(j=k.data("filter-val")):
j=k.val();b.push({columns:g,value:j})}f.filter.apply(a,[{filters:b}])}};e.fn.filtable=function(a){if("filter"===a)return f.filter.apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return f.init.apply(this,arguments);e.error("Unknown method `"+a+"` on jQuery.filtable")}})(jQuery);
