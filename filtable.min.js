(function(e){var g=["odd","even"],h=[],k={text:{selector:'input[type="text"]',event:"keyup"},select:{selector:"select",event:"change"},checkbox:{selector:'input[type="checkbox"]',event:"click"}},f={init:function(a){a=e.extend({controlPanel:null,handleSort:!0},a);var d=e(this);return this.each(function(){for(var b in k)e(k[b].selector,a.controlPanel).each(function(){var a=b,l=e(this);h.push(l);l.on(k[a].event,function(){if("select"===a){var b=l.data("filter-hash");b&&f.updateFilterHash(b,l.val())}f.createAndRunFilters(d)})});
e(window).on("hashchange",function(){f.applyHashFilters(a.controlPanel);f.createAndRunFilters(d)});f.applyHashFilters(a.controlPanel);f.createAndRunFilters(d)})},filter:function(a){a=e.extend({filters:[],handleSort:!0},a);return this.each(function(){var d=e(this);d.trigger("beforetablefilter");if(a.handleSort)d.on("aftertablesort",function(a,c){f.handleRowsThenStripe(d,function(a){return!a.hasClass("hidden")})});setTimeout(function(){f.handleRowsThenStripe(d,function(b){for(var c=0,d=a.filters.length;c<
d;c++){for(var f=a.filters[c].columns,e=a.filters[c].value.toString().toLowerCase(),h=!1,k=0,g=f.length;k<g;k++){var n=b.find("td").eq(f[k]),p=n.data("filter-val");0<=(void 0===p?n.text():p).toString().toLowerCase().indexOf(e)&&(h=!0)}if(!h)return!1}return!0});d.trigger("aftertablefilter")},10)})},handleRowsThenStripe:function(a,d){var b=0,c=a.find("> tbody");c.each(function(){var a=c.clone();a.find("> tr").each(function(){var a=e(this),c=d(a);a.removeClass(g.join(" "));c?(a.removeClass("hidden"),
a.addClass(g[b]),b=1-b):a.addClass("hidden")});c.replaceWith(a)})},createAndRunFilters:function(a){for(var d=[],b=0,c=h.length;b<c;b++){var e=h[b],g=e.data("filter-col");if(void 0!==g){g=g.toString().split(",");var m="";h[b].is(k.checkbox.selector)?h[b].is(":checked")&&(m=e.data("filter-val")):m=e.val();d.push({columns:g,value:m})}}f.filter.apply(a,[{filters:d}])},parseFilterHash:function(){var a=window.location.hash.replace("#","");if(0===a.length)return{};var d={};a=a.split("&");for(var b in a){var c=
a[b].split("=");2===c.length&&(d[c[0]]=c[1])}return d},applyHashFilters:function(a){var d=f.parseFilterHash(),b;for(b in d){var c=e('[data-filter-hash="'+b+'"]',a);"checkbox"===c.attr("type")?c.prop("checked","1"===d[b]?!0:!1):c.val(d[b])}},updateFilterHash:function(a,d){var b=f.parseFilterHash();b[a]=d;var c="#",e;for(e in b)0!==b[e].length&&("#"!==c&&(c+="&"),c+=e+"="+b[e]);"#"===c&&(c=window.location.pathname+window.location.search);window.history.replaceState(void 0,void 0,c)}};e.fn.filtable=
function(a){if("filter"===a)return f.filter.apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)e.error("Unknown method `"+a+"` on jQuery.filtable");else return f.init.apply(this,arguments)}})(jQuery);